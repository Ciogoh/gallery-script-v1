let inputTesto, sliderSize, sliderRepetitions, sliderSpacing, selectForma, selectFont, selectEffetto, selectFormato;let pickerSfondo, pickerTesto, btnShuffle, btnSave, btnInvert;let parola = "typography";let marginL = 250; let topH = 80;    let seed = 0;let pg; let tavolaW, tavolaH;function setup() {  createCanvas(windowWidth, windowHeight);    let xUI = 25;  let labelStyle = "color: #888; font-family: sans-serif; font-size: 10px; margin-bottom: 2px; letter-spacing: 1px; font-weight: bold;";  // --- TOP BAR ---  let inputW = 400;  createP('INSERISCI TESTO').position(marginL + (width-marginL)/2 - inputW/2, 5).style(labelStyle + "text-align:center; width:400px;");  inputTesto = createInput(parola).position(marginL + (width-marginL)/2 - inputW/2, 40).size(inputW, 25);  inputTesto.input(() => parola = inputTesto.value());  inputTesto.style("background:transparent; border:none; border-bottom:1px solid #555; color:#888; font-size:18px; text-align:center; outline:none;");  // --- MENU LATERALE ---  let y = 80; let step = 50;    createP('FORMATO TAVOLA').position(xUI, y).style(labelStyle);  selectFormato = createSelect().position(xUI, y + 20).size(180);  selectFormato.option('A4 (Verticale)');  selectFormato.option('A3 (Verticale Grande)');  selectFormato.option('SQUARE (1:1)');  selectFormato.option('CINEMA (Orizzontale)');  selectFormato.changed(updateTavola);  y += step;  createP('STRUTTURA').position(xUI, y).style(labelStyle);  selectForma = createSelect().position(xUI, y + 20).size(180);  ['GRID', 'CIRCLE', 'ROTATED GRID', 'CHAOS ORBIT', 'CONCRETE POETRY', 'TYPEWRITER ART', 'ONDULATO'].forEach(o => selectForma.option(o));  y += step;  createP('FILTRO GRAFICO').position(xUI, y).style(labelStyle);  selectEffetto = createSelect().position(xUI, y + 20).size(180);  ['NONE', 'OUTLINE', 'GLITCH', 'BLUR', 'DUOTONE'].forEach(o => selectEffetto.option(o));  y += step;  createP('COLORE TESTO').position(xUI, y).style(labelStyle);  pickerTesto = createColorPicker('#ffffff').position(xUI, y + 20).size(180, 25);  y += step;  createP('COLORE SFONDO').position(xUI, y).style(labelStyle);  pickerSfondo = createColorPicker('#0f0f0f').position(xUI, y + 20).size(180, 25);  y += step;  createP('CARATTERE').position(xUI, y).style(labelStyle);  selectFont = createSelect().position(xUI, y + 20).size(180);  ['Helvetica', 'Impact', 'Courier New', 'Georgia'].forEach(o => selectFont.option(o));  y += step;  createP('DIMENSIONE').position(xUI, y).style(labelStyle);  sliderSize = createSlider(5, 250, 60).position(xUI, y + 20).size(180);  y += step;  createP('SPAZIATURA').position(xUI, y).style(labelStyle);  sliderSpacing = createSlider(0.1, 5, 1, 0.1).position(xUI, y + 20).size(180);  y += step;  createP('RIPETIZIONI').position(xUI, y).style(labelStyle);  sliderRepetitions = createSlider(1, 800, 100).position(xUI, y + 20).size(180);  btnInvert = createButton('INVERTI COLORI').position(xUI, height - 160).size(180, 30);  btnInvert.mousePressed(invertiColori);  btnInvert.style("cursor:pointer; background:transparent; color:#888; border:1px solid #555; font-size:10px;");  btnShuffle = createButton('SHUFFLE CASO').position(xUI, height - 120).size(180, 30);  btnShuffle.mousePressed(() => seed = random(1000));    btnSave = createButton('SALVA PNG').position(xUI, height - 80).size(180, 40);  btnSave.mousePressed(() => save(pg, 'Alice_Poster.png'));  updateTavola(); }function invertiColori() {  let c1 = pickerTesto.value();  let c2 = pickerSfondo.value();  pickerTesto.value(c2);  pickerSfondo.value(c1);}function updateTavola() {  let f = selectFormato.value();  let availableW = windowWidth - marginL - 60;  let availableH = windowHeight - topH - 120;  if (f === 'A4 (Verticale)') { tavolaH = availableH; tavolaW = tavolaH * 0.7; }  else if (f === 'A3 (Verticale Grande)') { tavolaH = availableH * 1.1; tavolaW = tavolaH * 0.7; }  else if (f === 'SQUARE (1:1)') { let s = min(availableW, availableH); tavolaW = s; tavolaH = s; }  else if (f === 'CINEMA (Orizzontale)') { tavolaW = availableW; tavolaH = tavolaW * 0.56; }    if (pg) pg.remove();  pg = createGraphics(tavolaW, tavolaH);}function draw() {  background(12);   let areaX = marginL + (width - marginL) / 2 - tavolaW / 2;  let areaY = topH + (height - topH) / 2 - tavolaH / 2;  // SPAZIO PROTETTO (Safe Zone)  let reservedBottom = 35; // Altezza esclusa dal disegno  let safeH = tavolaH - reservedBottom;   pg.background(pickerSfondo.value());  pg.push();  // Trasliamo il disegno per centrarlo nell'area sicura superiore  pg.translate(tavolaW / 2, safeH / 2);    let eff = selectEffetto.value();  if (eff === 'OUTLINE') { pg.noFill(); pg.stroke(pickerTesto.value()); pg.strokeWeight(1.5); }   else { pg.fill(pickerTesto.value()); pg.noStroke(); }    pg.textFont(selectFont.value());  pg.textSize(sliderSize.value());  pg.textAlign(CENTER, CENTER);  pg.randomSeed(seed);    disegnaFormaBuffer(selectForma.value(), pg, safeH);  pg.pop();  if (eff === 'BLUR') pg.filter(BLUR, 3);  if (eff === 'DUOTONE') applyDuotone(pg);  if (eff === 'GLITCH') applyGlitch(pg);  drawFooterInTavola(pg);  noStroke(); fill(0, 40);  rect(areaX + 3, areaY + 3, tavolaW, tavolaH);   image(pg, areaX, areaY);  stroke(35);  line(marginL, 0, marginL, height);  line(marginL, topH, width, topH);}function disegnaFormaBuffer(stile, buffer, hLimite) {  let fs = sliderSize.value();  let reps = sliderRepetitions.value();  let space = sliderSpacing.value();  let limitY = hLimite / 2;  if (stile === 'GRID') {    let cols = floor(sqrt(reps));    for (let i = 0; i < reps; i++) {      let x = (i % cols - cols/2) * (fs * space * 1.5);      let y = (floor(i/cols) - cols/2) * (fs * 1.1);      // Controllo Safe Zone      if (y < limitY - fs/2) buffer.text(parola, x, y);    }  } else if (stile === 'CIRCLE') {    let rMax = min(tavolaW * 0.45, limitY - fs) * space;    for (let i = 0; i < reps; i++) {      let angle = TWO_PI / reps * i;      buffer.push();       buffer.rotate(angle);       buffer.text(parola, rMax, 0);       buffer.pop();    }  } else if (stile === 'CHAOS ORBIT') {    for (let i = 0; i < reps; i++) {      let r = buffer.random(limitY - fs);      let ang = buffer.random(TWO_PI);      buffer.push();       buffer.translate(cos(ang)*r, sin(ang)*r);      buffer.rotate(buffer.random([-HALF_PI, 0, HALF_PI]));      buffer.text(parola, 0, 0); buffer.pop();    }  } else if (stile === 'CONCRETE POETRY') {    for (let i = 0; i < reps; i++) {      let ty = buffer.random(-limitY + fs/2, limitY - fs/2);      buffer.text(parola, buffer.random(-tavolaW/2.1, tavolaW/2.1), ty);    }  } else if (stile === 'TYPEWRITER ART') {    buffer.textAlign(LEFT);    let startY = -limitY + fs;    for (let i = 0; i < reps/4; i++) {      let yPos = startY + (i * fs * space);      if (yPos < limitY - fs/2) buffer.text(parola, -tavolaW/2.1, yPos);    }  } else if (stile === 'ONDULATO') {    for (let i = 0; i < parola.length; i++) {      let x = (i - parola.length/2) * (fs * space);      let y = sin(frameCount * 0.05 + i * 0.5) * (limitY * 0.7);      buffer.text(parola[i], x, y);    }  } else if (stile === 'ROTATED GRID') {    let step = fs * space * 2.2;    for (let x = -tavolaW/2.1; x < tavolaW/2.1; x += step) {      for (let y = -limitY + fs; y < limitY - fs/2; y += step) {        buffer.push(); buffer.translate(x, y);         buffer.rotate(buffer.random([0, HALF_PI])); buffer.text(parola, 0, 0); buffer.pop();      }    }  }}function applyDuotone(buffer) {  buffer.loadPixels();  let c1 = color(pickerTesto.value());  let c2 = color(pickerSfondo.value());  for (let i = 0; i < buffer.pixels.length; i += 4) {    let avg = (buffer.pixels[i] + buffer.pixels[i+1] + buffer.pixels[i+2]) / 3;    let newCol = lerpColor(c2, c1, avg / 255);    buffer.pixels[i] = red(newCol);    buffer.pixels[i+1] = green(newCol);    buffer.pixels[i+2] = blue(newCol);  }  buffer.updatePixels();}function applyGlitch(buffer) {  for (let i = 0; i < 2; i++) {    let x = random(buffer.width);    let y = random(buffer.height - 50);    let w = random(60, 140);    let h = random(1, 4);    let section = buffer.get(x, y, w, h);    buffer.image(section, x + random(-12, 12), y);  }}function drawFooterInTavola(buffer) {  buffer.push();  let m = 10;   let cFooter = color(pickerTesto.value());    buffer.textAlign(LEFT, BOTTOM);    // Riga Tecnica  cFooter.setAlpha(60);  buffer.fill(cFooter);  buffer.noStroke();  buffer.textFont('Helvetica');  buffer.textSize(6);   buffer.text("2025 Vibe-Code Exercise", m, buffer.height - 18);    // Firma  cFooter.setAlpha(150);  buffer.fill(cFooter);  buffer.textSize(8);  buffer.text("Alice Federici", m, buffer.height - 8);    // Linea estetica  buffer.stroke(cFooter);  buffer.strokeWeight(0.5);  buffer.line(m, buffer.height - 25, m + 20, buffer.height - 25);  buffer.pop();}function windowResized() { resizeCanvas(windowWidth, windowHeight); updateTavola(); }