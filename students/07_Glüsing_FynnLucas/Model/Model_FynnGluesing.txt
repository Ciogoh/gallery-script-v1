let myModel;let mic;let modeSelector;let particles = [];let headPositions = [];function preload() {  myModel = loadModel('Meshy_AI_Flaming_Hydra_Burner_0106210254_generate.obj', true);}function setup() {  // 1. FULLSCREEN CANVAS  createCanvas(windowWidth, windowHeight, WEBGL);  // 2. MICROPHONE INPUT  mic = new p5.AudioIn();  mic.start();  // --- HEAD POSITIONS ---  headPositions = [    createVector(85, 50, 40),   // Head 1    createVector(-70, 60, 70),  // Head 2    createVector(30, 90, -30),  // Head 3    createVector(-70, 80, 0)    // Head 4  ];  // UI  modeSelector = createSelect();  modeSelector.position(10, 10);  modeSelector.option('Flaming Metal');   modeSelector.option('Standard (Silver)'); // Renamed for clarity  modeSelector.option('Wireframe');  modeSelector.option('Fleet');  modeSelector.selected('Flaming Metal');}// RESIZE IF WINDOW CHANGESfunction windowResized() {  resizeCanvas(windowWidth, windowHeight);}function draw() {  background(20);   orbitControl();  // GET MICROPHONE VOLUME (0 to 1)  let vol = mic.getLevel();  let beatEnergy = map(vol, 0, 0.1, 1, 4.0);   let mode = modeSelector.value();  blendMode(BLEND);  if (mode === 'Flaming Metal') {    drawFlamingMetal(beatEnergy, vol);  } else if (mode === 'Standard (Silver)') {    drawStandard(beatEnergy);  } else if (mode === 'Wireframe') {    drawWireframe(beatEnergy);  } else if (mode === 'Fleet') {    drawFleet(beatEnergy);  }}// ---------------------------------------------------------// FLAMING METAL MODE (Red + Fire + Lights)// ---------------------------------------------------------function drawFlamingMetal(energy, rawVol) {  noStroke();  ambientLight(40);   // Mouse Light  let mouseLx = mouseX - width/2;  let mouseLy = mouseY - height/2;  pointLight(255, 255, 255, mouseLx, mouseLy, 300);  // Dancing Fire Lights  let lightBright = map(rawVol, 0, 0.1, 100, 255);     for (let pos of headPositions) {    let jitterAmt = 10 * energy;     let jitterX = random(-jitterAmt, jitterAmt);    let jitterY = random(-jitterAmt, jitterAmt);    let jitterZ = random(-jitterAmt, jitterAmt);    pointLight(      lightBright, lightBright * 0.6, 0,       pos.x + jitterX,       pos.y + jitterY,       pos.z + jitterZ    );  }  // RED METAL MATERIAL  specularMaterial(200, 50, 50);   shininess(80);   push();  scale(1 + (rawVol * 0.5));   model(myModel);  pop();  // Spawn Flames  let spawnCount = map(rawVol, 0, 0.1, 2, 25);  for (let i = 0; i < spawnCount; i++) {    let randomHead = random(headPositions);    particles.push(new FireParticle(randomHead, energy));  }  // Draw Flames  blendMode(ADD);   for (let i = particles.length - 1; i >= 0; i--) {    let p = particles[i];    p.update();    p.show();    if (p.finished()) particles.splice(i, 1);  }}// ---------------------------------------------------------// STANDARD MODE (Now Silver Metal)// ---------------------------------------------------------function drawStandard(s) {  noStroke();    // Lighting for metal to look good  ambientLight(60);    // A white directional light from top-right  directionalLight(255, 255, 255, 1, 1, -1);    // Mouse flashlight for interaction  pointLight(255, 255, 255, mouseX - width/2, mouseY - height/2, 200);  // SILVER MATERIAL  specularMaterial(200, 200, 220); // Light Grey/Silver  shininess(50); // Medium shine    scale(s);  model(myModel);}// ---------------------------------------------------------// OTHER MODES// ---------------------------------------------------------function drawWireframe(s) {  rotateY(frameCount * 0.01);  stroke(0, 255, 0);  strokeWeight(0.5);  noFill();  scale(s);  model(myModel);}function drawFleet(s) {  ambientLight(100);  directionalLight(255, 255, 255, 0, 0, -1);    // Fleet also gets the silver treatment now  noStroke();  specularMaterial(200, 200, 220);   shininess(30);  scale(s);  for (let i = 0; i < 8; i++) {    push();    rotateY((TWO_PI / 8) * i);    translate(120, 0, 0);    rotateY(frameCount * 0.02);    scale(0.5);     model(myModel);    pop();  }}// ---------------------------------------------------------// PARTICLE CLASS// ---------------------------------------------------------class FireParticle {  constructor(startPos, energy) {    this.x = startPos.x + random(-2, 2);     this.y = startPos.y + random(-2, 2);     this.z = startPos.z + random(-2, 2);        let centerOfBody = createVector(0, 80, 0);    let direction = createVector(this.x, this.y, this.z).sub(centerOfBody);    direction.normalize();         let speed = random(4, 8) * energy;         this.vx = direction.x * speed;    this.vy = direction.y * speed;     this.vz = direction.z * speed;    this.vy -= 1;     this.size = random(20, 35);     this.alpha = 255;   }  update() {    this.x += this.vx;    this.y += this.vy;    this.z += this.vz;    this.x += random(-2, 2);     this.y += random(-2, 2);    this.z += random(-2, 2);    this.alpha -= 8;   }  show() {    noStroke();    push();    translate(this.x, this.y, this.z);        if (this.alpha > 200) fill(255, 255, 0, this.alpha);     else if (this.alpha > 100) fill(255, 100, 0, this.alpha);    else fill(200, 0, 0, this.alpha);    rotateY(frameCount * 0.1);    plane(this.size, this.size);    rotateY(PI / 2);    plane(this.size, this.size);    pop();  }  finished() {    return this.alpha < 0;  }}